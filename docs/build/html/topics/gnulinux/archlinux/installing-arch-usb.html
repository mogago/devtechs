

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="es" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="es" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Instalando Arch en un dispositivo USB &mdash; documentación de DevTechs - </title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../search.html" />
    <link rel="next" title="Instalar un Desktop Environment en Arch" href="desktop-env.html" />
    <link rel="prev" title="Instalando Arch" href="installing-arch.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> DevTechs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ansible/_ansible.html">Ansible</a></li>
</ul>
<p class="caption"><span class="caption-text">Git &amp; GitHub</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../gitgithub/_gitgithub.html">Git y GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gitgithub/gitgithub-lessons.html">Git &amp; GitHub Lessons</a></li>
</ul>
<p class="caption"><span class="caption-text">GNU/Linux</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../_gnulinux.html">GNU/Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh.html">SSH (Secure SHell)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-management.html">User Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../new-disk-dd.html">Creando una imagen de disco con <code class="docutils literal notranslate"><span class="pre">dd</span></code></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="_archlinux.html">ArchLinux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installing-arch.html">Instalando Arch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Instalando Arch en un dispositivo USB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creando-un-medio-de-instalacion">Creando un medio de instalación</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arrancar-el-medio-de-instalacion-iso-live">Arrancar el medio de instalación ISO live</a></li>
<li class="toctree-l3"><a class="reference internal" href="#proceso-de-instalacion-de-arch-linux">Proceso de instalación de Arch Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#conexion-a-internet">Conexión a Internet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pre-instalacion">Pre-instalación</a></li>
<li class="toctree-l4"><a class="reference internal" href="#instalacion">Instalación</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configurar-el-sistema">Configurar el sistema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="desktop-env.html">Instalar un Desktop Environment en Arch</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Markdown</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../markdown/_markdown.html">Markdown</a></li>
</ul>
<p class="caption"><span class="caption-text">OpenStack</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../openstack/_openstack.html">OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openstack/openstack-essentials/_openstack-essentials.html">OpenStack Essentials</a></li>
</ul>
<p class="caption"><span class="caption-text">PXE &amp; Kickstart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pxekickstart/_pxekickstart.html">PXE &amp; Kickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">Python</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python/_python.html">Python</a></li>
</ul>
<p class="caption"><span class="caption-text">RaspberryPi</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../raspberrypi/_raspberrypi.html">RaspberryPi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../raspberrypi/noobs.html">NOOBS (New Out Of Box Software)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../raspberrypi/touchscreen.html">Touchscreen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../raspberrypi/raspbian-config.html">Raspbian configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">SDN</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sdn/_sdn.html">SDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sdn/sdn-with-openstack-book/_sdn-with-openstack-book.html">SDN with OpenStack Book</a></li>
</ul>
<p class="caption"><span class="caption-text">Virtualization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization/_virtualization.html">Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization/mastering-kvm-virtualization-book/_mastering-kvm-virtualization-book.html">Mastering KVM Virtualization Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization/qemu-kvm/_qemu-kvm.html">QEMU/KVM Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization/network-virtualization/_network-virtualization.html">Network Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virtualization/storage-virtualization/_storage-virtualization.html">Storage Virtualization</a></li>
</ul>
<p class="caption"><span class="caption-text">Web</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../web/_web.html">Web</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">DevTechs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="_archlinux.html">ArchLinux</a> &raquo;</li>
        
      <li>Instalando Arch en un dispositivo USB</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/topics/gnulinux/archlinux/installing-arch-usb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="instalando-arch-en-un-dispositivo-usb">
<h1><a class="toc-backref" href="#id2">Instalando Arch en un dispositivo USB</a><a class="headerlink" href="#instalando-arch-en-un-dispositivo-usb" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#instalando-arch-en-un-dispositivo-usb" id="id2">Instalando Arch en un dispositivo USB</a><ul>
<li><a class="reference internal" href="#creando-un-medio-de-instalacion" id="id3">Creando un medio de instalación</a></li>
<li><a class="reference internal" href="#arrancar-el-medio-de-instalacion-iso-live" id="id4">Arrancar el medio de instalación ISO live</a></li>
<li><a class="reference internal" href="#proceso-de-instalacion-de-arch-linux" id="id5">Proceso de instalación de Arch Linux</a><ul>
<li><a class="reference internal" href="#conexion-a-internet" id="id6">Conexión a Internet</a><ul>
<li><a class="reference internal" href="#conexion-cableada" id="id7">Conexión Cableada</a></li>
<li><a class="reference internal" href="#conexion-inalambrica" id="id8">Conexión Inalámbrica</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pre-instalacion" id="id9">Pre-instalación</a></li>
<li><a class="reference internal" href="#instalacion" id="id10">Instalación</a></li>
<li><a class="reference internal" href="#configurar-el-sistema" id="id11">Configurar el sistema</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>El procedimiento para instalar Arch Linux en un dispositivo de almacenamiento USB comparte varios pasos con el procedimiento general de instalar Arch Linux en una PC (ver <a class="reference internal" href="installing-arch.html#installingarch"><span class="std std-ref">Instalando Arch</span></a>).</p>
<p>Requisitos:</p>
<ul class="simple">
<li>Debemos contar con una PC habilitada para cambiar el orden de arranque de los dispositivos de almacenamiento conectados (disco duro, USB, CD-ROM).</li>
<li>2 USB vacíos: en uno crearemos el medio de instalación .iso booteable (<strong>live USB</strong>) y el el otro instalaremos el SO en sí (<strong>persistent USB</strong>).</li>
<li>Una imagen ISO de Arch Linux descargada (<a class="reference external" href="https://www.archlinux.org/download/">página de descargas de Arch Linux</a>)</li>
</ul>
<div class="section" id="creando-un-medio-de-instalacion">
<h2><a class="toc-backref" href="#id3">Creando un medio de instalación</a><a class="headerlink" href="#creando-un-medio-de-instalacion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En un USB de poca capacidad (p.ej. 8 GB) escribiremos la imagen ISO de Arch Linux, de forma que sirva como medio de instalación del SO.</p>
<p>Para escrbir un medio de instalación USB booteable sigamos los siguientes pasos:</p>
<ul class="simple">
<li>En Linux:</li>
</ul>
<ol class="arabic simple">
<li>Conectar el live USB a la PC y desmontarlo:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># umount /dev/sdXn</span>
<span class="s1">&#39;#&#39;</span> umount /dev/sdb1
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Escribir el medio de instalación en el USB live:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># dd bs=4M if=/path/archlinux.iso of=/dev/sdX status=progress &amp;&amp; sync</span>
<span class="s1">&#39;#&#39;</span> dd <span class="nv">bs</span><span class="o">=</span>4M <span class="k">if</span><span class="o">=</span>/home/gabriel/Downloads/archlinux-2020.01.01-x86_64.iso <span class="nv">of</span><span class="o">=</span>/dev/sdb <span class="nv">status</span><span class="o">=</span>progress <span class="o">&amp;&amp;</span> sync
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">if=/path/archlinux.iso</span></code>: es la ruta hacia la imagen ISO</li>
<li><code class="docutils literal notranslate"><span class="pre">of=/dev/sdX</span></code>: es el dispositivo USB (sdb, sdc, sdd, …)</li>
</ul>
</div>
<ul class="simple">
<li>En Windows:</li>
</ul>
<p>Podemos usar programas como <a class="reference external" href="https://rufus.ie/">Rufus</a>, <a class="reference external" href="https://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/">Universal USB Installer</a> o <a class="reference external" href="https://www.pendrivelinux.com/yumi-multiboot-usb-creator/">YUMI</a>.</p>
<p>Luego de este paso ya deberíamos tener un USB live con el medio de instalación de Arch Linux booteable. Ahora lo arranqueremos en nuestra máquina.</p>
</div>
<div class="section" id="arrancar-el-medio-de-instalacion-iso-live">
<h2><a class="toc-backref" href="#id4">Arrancar el medio de instalación ISO live</a><a class="headerlink" href="#arrancar-el-medio-de-instalacion-iso-live" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p class="last">En la BIOS o UEFI del sistema debemos cambiar el orden de arranque de los dispositivos y poner con mayor prioridad a los puertos USB. Según el modelo de la computadora, los pasos serán distintos. Seguir la referencia: <a class="reference external" href="https://www.groovypost.com/howto/bios-uefi-setup-guide-boot-from-cd-dvd-usb-drive-sd-card/">BIOS-UEFI - Boot from a CD DVD USB Drive or SD Card</a></p>
</div>
<ol class="arabic simple">
<li>Con la PC apagada, insertar el USB live en la computadora.</li>
<li>Si hemos cambiado el orden de los dispositivos en la BIOS o UEFI, arrancará el medio USB.</li>
<li>En el menú bootloader elegir la opción <span class="guilabel">Boot Arch Linux (x86_64)</span>. Arrancará el medio de instalación de Arch Linux</li>
</ol>
<div class="figure align-center" id="id1">
<img alt="../../../_images/live-iso-arch-linux.png" src="../../../_images/live-iso-arch-linux.png" />
<p class="caption"><span class="caption-text">Live ISO image de Arch Linux</span></p>
</div>
<p>Cuando haya terminado de cargar el arranque de la imagen iniciaremos sesión automáticamente como usuarios <code class="docutils literal notranslate"><span class="pre">root</span></code> bajo el prompt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@archiso ~ <span class="s1">&#39;#&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="proceso-de-instalacion-de-arch-linux">
<h2><a class="toc-backref" href="#id5">Proceso de instalación de Arch Linux</a><a class="headerlink" href="#proceso-de-instalacion-de-arch-linux" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="conexion-a-internet">
<h3><a class="toc-backref" href="#id6">Conexión a Internet</a><a class="headerlink" href="#conexion-a-internet" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Por defecto, el medio de instalación de Arch Linux reconocerá las interfaces de red que tengamos en el enlace, ya sea una interfaz de red cableada o inalámbrica. Sin embargo, el uso de ambas interfaces en el proceso de instalación es distinto.</p>
<p>La conexión recomendada es a través de una red cableada debido a la mayor velocidad y la configuración de red automática.</p>
<div class="section" id="conexion-cableada">
<h4><a class="toc-backref" href="#id7">Conexión Cableada</a><a class="headerlink" href="#conexion-cableada" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Si tenemos una interfaz física cableada conectada a la red local, donde existe un servidor DHCP configurado, recibiremos la configuración de red automáticamente al arrancar el medio de instalación. Comprobar la conectividad a Internet con:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> ping archlinux.org
</pre></div>
</div>
<p>En caso que tengamos problemas de conexión a la red cableada debemos hacer troubleshooting con los comandos <code class="docutils literal notranslate"><span class="pre">ip</span></code> y <code class="docutils literal notranslate"><span class="pre">dhclient</span></code>.</p>
</div>
<div class="section" id="conexion-inalambrica">
<h4><a class="toc-backref" href="#id8">Conexión Inalámbrica</a><a class="headerlink" href="#conexion-inalambrica" title="Enlazar permanentemente con este título">¶</a></h4>
<ol class="arabic simple">
<li>La mayoría de interfaces inalámbricas son soportadas por los drivers en el medio de instalación ISO. Para comprobar que nuestro sistema es compatible, revisar que los drivers del kernel se hayan cargado para la interfaz inalámbrica:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> lspci -k <span class="p">|</span> grep -A3 <span class="s1">&#39;Network controller&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Si los drives han cargado, levantar la interfaz inalámbrica:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> ip link <span class="nb">set</span> dev wlan0 up
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Escanear redes disponibles:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> iw dev wlan0 scan <span class="p">|</span> grep <span class="s1">&#39;SSID:&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Revisar qué tipo de autenticación es requerida por la red a la que nos deseamos conectar:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> iw dev wlan0 scan <span class="p">|</span> less
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Según el tipo de seguridad en la red inalámbrica usar el correspondiente comando:</li>
</ol>
<ul class="simple">
<li>Red inalámbrica con encriptación WPA/WPA2:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> wpa_supplicant -i wlan0 -c &lt;<span class="o">(</span>wpa_passphrase <span class="s1">&#39;networkname&#39;</span> <span class="s1">&#39;password&#39;</span><span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Red inalámbrica con encriptación WEP:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> iw dev wlan0 connect <span class="s1">&#39;networkname&#39;</span> key <span class="m">0</span>:<span class="s1">&#39;password&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>Red inalámbrica sin encriptación:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> iw dev wlan0 connect <span class="s1">&#39;networkname&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Una vez que se ha establecido conexión bifurcar el proceso presionando Ctrl+Z (suspende el proceso) y ejecutando:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> <span class="nb">bg</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Recibir configuración de red por DHCP:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> dhclient -v wlan0
</pre></div>
</div>
</div>
</div>
<div class="section" id="pre-instalacion">
<h3><a class="toc-backref" href="#id9">Pre-instalación</a><a class="headerlink" href="#pre-instalacion" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li>Configurar la distribución del teclado (keyboard layout) a español:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> loadkeys la-latin1
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Comprobar conectividad a Internet:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> ping archlinux.org
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Actualizar el reloj del sistema</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> timedatectl set-ntp <span class="nb">true</span>
<span class="s1">&#39;#&#39;</span> timedatectl set-timezone America/Lima
<span class="s1">&#39;#&#39;</span> timedatectl status

                          Local time: Mon <span class="m">2020</span>-01-20 <span class="m">15</span>:58:09 -05
                      Universal time: Mon <span class="m">2020</span>-01-20 <span class="m">20</span>:58:09 UTC
                            RTC time: Mon <span class="m">2020</span>-01-20 <span class="m">20</span>:58:09
                           Time zone: America/Lima <span class="o">(</span>-05, -0500<span class="o">)</span>
           System clock synchronized: yes
    systemd-timesyncd.service active: yes
                     RTC in <span class="nb">local</span> TZ: no
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Reconocer el medio USB donde instalaremos el SO:</li>
</ol>
<p>4.1 Listar dispositivos y particiones identificados en el sistema (con <code class="docutils literal notranslate"><span class="pre">lblk</span></code> o <code class="docutils literal notranslate"><span class="pre">fdisk</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> lsblk

NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
loop0    <span class="m">7</span>:0    <span class="m">0</span> <span class="m">541</span>.5M  <span class="m">1</span> loop /run/archiso/sfs/airootfs
sda      <span class="m">8</span>:0    <span class="m">0</span> <span class="m">232</span>.9G  <span class="m">0</span> disk
├─sda1   <span class="m">8</span>:1    <span class="m">0</span>   549M  <span class="m">0</span> part
├─sda2   <span class="m">8</span>:2    <span class="m">0</span> <span class="m">144</span>.5G  <span class="m">0</span> part
├─sda3   <span class="m">8</span>:3    <span class="m">0</span>  <span class="m">83</span>.8G  <span class="m">0</span> part
├─sda4   <span class="m">8</span>:4    <span class="m">0</span>     1K  <span class="m">0</span> part
└─sda5   <span class="m">8</span>:5    <span class="m">0</span>   <span class="m">4</span>.1G  <span class="m">0</span> part
sdb      <span class="m">8</span>:16   <span class="m">1</span>  <span class="m">58</span>.8G  <span class="m">0</span> disk
├─sdb1   <span class="m">8</span>:17   <span class="m">1</span>   656M  <span class="m">0</span> part /run/archiso/bootmnt
└─sdb2   <span class="m">8</span>:18   <span class="m">1</span>    64M  <span class="m">0</span> part
sr0     <span class="m">11</span>:0    <span class="m">1</span>  1024M  <span class="m">0</span> rom
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>La herramienta <code class="docutils literal notranslate"><span class="pre">fdisk</span></code> tiene una lista de distintos de particiones para una unidad de almacenamiento tipo USB (no es la misma lista de opciones que para un disco duro):</p>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> fdisk /dev/sdc

Welcome to fdisk <span class="o">(</span>util-linux <span class="m">2</span>.34<span class="o">)</span>.
Changes will remain in memory only, <span class="k">until</span> you decide to write them.
Be careful before using the write command.

Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: m

Help:

GPT
M   enter protective/hybrid MBR

Generic
d   delete a partition
F   list free unpartitioned space
l   list known partition types
n   add a new partition
p   print the partition table
t   change a partition <span class="nb">type</span>
v   verify the partition table
i   print information about a partition

Misc
m   print this menu
x   extra functionality <span class="o">(</span>experts only<span class="o">)</span>

Script
I   load disk layout from sfdisk script file
O   dump disk layout to sfdisk script file

Save <span class="p">&amp;</span> Exit
w   write table to disk and <span class="nb">exit</span>
q   quit without saving changes

Create a new label
g   create a new empty GPT partition table
G   create a new empty SGI <span class="o">(</span>IRIX<span class="o">)</span> partition table
o   create a new empty DOS partition table
s   create a new empty Sun partition table

Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: l
<span class="m">1</span> EFI System                     C12A7328-F81F-11D2-BA4B-00A0C93EC93B
<span class="m">1</span> EFI System                     C12A7328-F81F-11D2-BA4B-00A0C93EC93B
<span class="m">2</span> MBR partition scheme           024DEE41-33E7-11D3-9D69-0008C781F39F
<span class="m">3</span> Intel Fast Flash               D3BFE2DE-3DAF-11DF-BA40-E3A556D89593
<span class="m">4</span> BIOS boot                      <span class="m">21686148</span>-6449-6E6F-744E-656564454649
<span class="m">5</span> Sony boot partition            F4019732-066E-4E12-8273-346C5641494F
<span class="m">6</span> Lenovo boot partition          BFBFAFE7-A34F-448A-9A5B-6213EB736C22
<span class="m">7</span> PowerPC PReP boot              9E1A2D38-C612-4316-AA26-8B49521E5A8B
<span class="m">8</span> ONIE boot                      7412F7D5-A156-4B13-81DC-867174929325
<span class="m">9</span> ONIE config                    D4E6E2CD-4469-46F3-B5CB-1BFF57AFC149
<span class="m">10</span> Microsoft reserved             E3C9E316-0B5C-4DB8-817D-F92DF00215AE
<span class="m">11</span> Microsoft basic data           EBD0A0A2-B9E5-4433-87C0-68B6B72699C7
<span class="m">12</span> Microsoft LDM metadata         5808C8AA-7E8F-42E0-85D2-E1E90434CFB3
<span class="m">13</span> Microsoft LDM data             AF9B60A0-1431-4F62-BC68-3311714A69AD
<span class="m">14</span> Windows recovery environment   DE94BBA4-06D1-4D40-A16A-BFD50179D6AC
<span class="m">15</span> IBM General Parallel Fs        37AFFC90-EF7D-4E96-91C3-2D7AE055B174
<span class="m">16</span> Microsoft Storage Spaces       E75CAF8F-F680-4CEE-AFA3-B001E56EFC2D
<span class="m">17</span> HP-UX data                     75894C1E-3AEB-11D3-B7C1-7B03A0000000
<span class="m">18</span> HP-UX service                  E2A1E728-32E3-11D6-A682-7B03A0000000
<span class="m">19</span> Linux swap                     0657FD6D-A4AB-43C4-84E5-0933C84B4F4F
<span class="m">20</span> Linux filesystem               0FC63DAF-8483-4772-8E79-3D69D8477DE4
<span class="m">21</span> Linux server data              3B8F8425-20E0-4F3B-907F-1A25A76F98E8
<span class="m">22</span> Linux root <span class="o">(</span>x86<span class="o">)</span>               <span class="m">44479540</span>-F297-41B2-9AF7-D131D5F0458A
<span class="m">23</span> Linux root <span class="o">(</span>ARM<span class="o">)</span>               69DAD710-2CE4-4E3C-B16C-21A1D49ABED3
<span class="m">24</span> Linux root <span class="o">(</span>x86-64<span class="o">)</span>            4F68BCE3-E8CD-4DB1-96E7-FBCAF984B709
<span class="m">25</span> Linux root <span class="o">(</span>ARM-64<span class="o">)</span>            B921B045-1DF0-41C3-AF44-4C6F280D3FAE
<span class="m">26</span> Linux root  <span class="o">(</span>IA-64<span class="o">)</span>             993D8D3D-F80E-4225-855A-9DAF8ED7EA97
<span class="m">27</span> Linux reserved                 8DA63339-0007-60C0-C436-083AC8230908
<span class="m">28</span> Linux home                     933AC7E1-2EB4-4F13-B844-0E14E2AEF915
<span class="m">29</span> Linux RAID                     A19D880F-05FC-4D3B-A006-743F0F84911E
<span class="m">30</span> Linux extended boot            BC13C2FF-59E6-4262-A352-B275FD6F7172
<span class="m">31</span> Linux LVM                      E6D6D379-F507-44C2-A23C-238F2A3DF928
<span class="m">32</span> FreeBSD data                   516E7CB4-6ECF-11D6-8FF8-00022D09712B
<span class="m">33</span> FreeBSD boot                   83BD6B9D-7F41-11DC-BE0B-001560B84F0F
<span class="m">34</span> FreeBSD swap                   516E7CB5-6ECF-11D6-8FF8-00022D09712B
<span class="m">35</span> FreeBSD UFS                    516E7CB6-6ECF-11D6-8FF8-00022D09712B
<span class="m">36</span> FreeBSD ZFS                    516E7CBA-6ECF-11D6-8FF8-00022D09712B
<span class="m">37</span> FreeBSD Vinum                  516E7CB8-6ECF-11D6-8FF8-00022D09712B
<span class="m">38</span> Apple HFS/HFS+                 <span class="m">48465300</span>-0000-11AA-AA11-00306543ECAC
<span class="m">39</span> Apple UFS                      <span class="m">55465300</span>-0000-11AA-AA11-00306543ECAC
<span class="m">40</span> Apple RAID                     <span class="m">52414944</span>-0000-11AA-AA11-00306543ECAC
<span class="m">41</span> Apple RAID offline             <span class="m">52414944</span>-5F4F-11AA-AA11-00306543ECAC
<span class="m">42</span> Apple boot                     426F6F74-0000-11AA-AA11-00306543ECAC
<span class="m">43</span> Apple label                    4C616265-6C00-11AA-AA11-00306543ECAC
<span class="m">44</span> Apple TV recovery              5265636F-7665-11AA-AA11-00306543ECAC
<span class="m">45</span> Apple Core storage             53746F72-6167-11AA-AA11-00306543ECAC
<span class="m">46</span> Solaris boot                   6A82CB45-1DD2-11B2-99A6-080020736631
<span class="m">47</span> Solaris root                   6A85CF4D-1DD2-11B2-99A6-080020736631
<span class="m">48</span> Solaris /usr <span class="p">&amp;</span> Apple ZFS       6A898CC3-1DD2-11B2-99A6-080020736631
<span class="m">49</span> Solaris swap                   6A87C46F-1DD2-11B2-99A6-080020736631
<span class="m">50</span> Solaris backup                 6A8B642B-1DD2-11B2-99A6-080020736631
<span class="m">51</span> Solaris /var                   6A8EF2E9-1DD2-11B2-99A6-080020736631
<span class="m">52</span> Solaris /home                  6A90BA39-1DD2-11B2-99A6-080020736631
<span class="m">53</span> Solaris alternate sector       6A9283A5-1DD2-11B2-99A6-080020736631
<span class="m">54</span> Solaris reserved <span class="m">1</span>             6A945A3B-1DD2-11B2-99A6-080020736631
<span class="m">55</span> Solaris reserved <span class="m">2</span>             6A9630D1-1DD2-11B2-99A6-080020736631
<span class="m">56</span> Solaris reserved <span class="m">3</span>             6A980767-1DD2-11B2-99A6-080020736631
<span class="m">57</span> Solaris reserved <span class="m">4</span>             6A96237F-1DD2-11B2-99A6-080020736631
<span class="m">58</span> Solaris reserved <span class="m">5</span>             6A8D2AC7-1DD2-11B2-99A6-080020736631
<span class="m">59</span> NetBSD swap                    49F48D32-B10E-11DC-B99B-0019D1879648
<span class="m">60</span> NetBSD FFS                     49F48D5A-B10E-11DC-B99B-0019D1879648
<span class="m">61</span> NetBSD LFS                     49F48D82-B10E-11DC-B99B-0019D1879648
<span class="m">62</span> NetBSD concatenated            2DB519C4-B10E-11DC-B99B-0019D1879648
<span class="m">63</span> NetBSD encrypted               2DB519EC-B10E-11DC-B99B-0019D1879648
<span class="m">64</span> NetBSD RAID                    49F48DAA-B10E-11DC-B99B-0019D1879648
<span class="m">65</span> ChromeOS kernel                FE3A2A5D-4F32-41A7-B725-ACCC3285A309
<span class="m">66</span> ChromeOS root fs               3CB8E202-3B7E-47DD-8A3C-7FF2A13CFCEC
<span class="m">67</span> ChromeOS reserved              2E0A753D-9E48-43B0-8337-B15192CB1B5E
<span class="m">68</span> MidnightBSD data               85D5E45A-237C-11E1-B4B3-E89A8F7FC3A7
<span class="m">69</span> MidnightBSD boot               85D5E45E-237C-11E1-B4B3-E89A8F7FC3A7
<span class="m">70</span> MidnightBSD swap               85D5E45B-237C-11E1-B4B3-E89A8F7FC3A7
<span class="m">71</span> MidnightBSD UFS                0394EF8B-237E-11E1-B4B3-E89A8F7FC3A7
<span class="m">72</span> MidnightBSD ZFS                85D5E45D-237C-11E1-B4B3-E89A8F7FC3A7
<span class="m">73</span> MidnightBSD Vinum              85D5E45C-237C-11E1-B4B3-E89A8F7FC3A7
<span class="m">74</span> Ceph Journal                   45B0969E-9B03-4F30-B4C6-B4B80CEFF106
<span class="m">75</span> Ceph Encrypted Journal         45B0969E-9B03-4F30-B4C6-5EC00CEFF106
<span class="m">76</span> Ceph OSD                       4FBD7E29-9D25-41B8-AFD0-062C0CEFF05D
<span class="m">77</span> Ceph crypt OSD                 4FBD7E29-9D25-41B8-AFD0-5EC00CEFF05D
<span class="m">78</span> Ceph disk in creation          89C57F98-2FE5-4DC0-89C1-F3AD0CEFF2BE
<span class="m">79</span> Ceph crypt disk in creation    89C57F98-2FE5-4DC0-89C1-5EC00CEFF2BE
<span class="m">80</span> VMware VMFS                    AA31E02A-400F-11DB-9590-000C2911D1B8
<span class="m">81</span> VMware Diagnostic              9D275380-40AD-11DB-BF97-000C2911D1B8
<span class="m">82</span> VMware Virtual SAN             381CFCCC-7288-11E0-92EE-000C2911D0B2
<span class="m">83</span> VMware Virsto                  77719A0C-A4A0-11E3-A47E-000C29745A24
<span class="m">84</span> VMware Reserved                9198EFFC-31C0-11DB-8F78-000C2911D1B8
<span class="m">85</span> OpenBSD data                   824CC7A0-36A8-11E3-890A-952519AD3F61
<span class="m">86</span> QNX6 file system               CEF5A9AD-73BC-4601-89F3-CDEEEEE321A1
<span class="m">87</span> Plan <span class="m">9</span> partition               C91818F9-8025-47AF-89D2-F030D7000C2C
<span class="m">88</span> HiFive Unleashed FSBL          5B193300-FC78-40CD-8002-E86C45580B47
<span class="m">89</span> HiFive Unleashed BBL           2E54B353-1271-4842-806F-E436D6AF6985
</pre></div>
</div>
</div>
<p>4.2 Conectar a la PC el medio de almacenamiento USB donde instalaremos el SO.</p>
<p>4.3 Volver a correr el comando para listar los medios de almacenamiento conectados a la PC y ver cual es el nuevo dispositivo en la lista:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> lsblk

NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
loop0    <span class="m">7</span>:0    <span class="m">0</span> <span class="m">541</span>.5M  <span class="m">1</span> loop /run/archiso/sfs/airootfs
sda      <span class="m">8</span>:0    <span class="m">0</span> <span class="m">232</span>.9G  <span class="m">0</span> disk
├─sda1   <span class="m">8</span>:1    <span class="m">0</span>   549M  <span class="m">0</span> part
├─sda2   <span class="m">8</span>:2    <span class="m">0</span> <span class="m">144</span>.5G  <span class="m">0</span> part
├─sda3   <span class="m">8</span>:3    <span class="m">0</span>  <span class="m">83</span>.8G  <span class="m">0</span> part
├─sda4   <span class="m">8</span>:4    <span class="m">0</span>     1K  <span class="m">0</span> part
└─sda5   <span class="m">8</span>:5    <span class="m">0</span>   <span class="m">4</span>.1G  <span class="m">0</span> part
sdb      <span class="m">8</span>:16   <span class="m">1</span>  <span class="m">58</span>.8G  <span class="m">0</span> disk
├─sdb1   <span class="m">8</span>:17   <span class="m">1</span>   656M  <span class="m">0</span> part /run/archiso/bootmnt
└─sdb2   <span class="m">8</span>:18   <span class="m">1</span>    64M  <span class="m">0</span> part
<span class="hll">sdc      <span class="m">8</span>:32   <span class="m">0</span> <span class="m">111</span>.8G  <span class="m">0</span> disk
</span><span class="hll">└─sdc1   <span class="m">8</span>:33   <span class="m">0</span> <span class="m">111</span>.8G  <span class="m">0</span> part
</span>sr0     <span class="m">11</span>:0    <span class="m">1</span>  1024M  <span class="m">0</span> rom
</pre></div>
</div>
<p>Vemos que tenemos un nuevo dispositivo <code class="docutils literal notranslate"><span class="pre">sdc</span></code> en nuestra lista. Esta unidad es el USB que hemos conectado recientemente y donde haremos la instalación del SO.</p>
<ol class="arabic simple" start="5">
<li>Para realizar la partición del medio de almacenamiento usaremos dos herramientas: <code class="docutils literal notranslate"><span class="pre">gdisk</span></code> y <code class="docutils literal notranslate"><span class="pre">fdisk</span></code>.</li>
</ol>
<p>Deseamos el siguiente esquema de particiones:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>Partición 1:</dt>
<dd><ul class="first last">
<li>Con <code class="docutils literal notranslate"><span class="pre">gdisk</span></code></li>
<li>Size: 10 MB</li>
<li>Type: BIOS boot partition (<code class="docutils literal notranslate"><span class="pre">ef02</span></code>)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Partición 2:</dt>
<dd><ul class="first last">
<li>Con <code class="docutils literal notranslate"><span class="pre">gdisk</span></code></li>
<li>Size: 500 MB</li>
<li>Type: EFI System (<code class="docutils literal notranslate"><span class="pre">ef00</span></code>)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Partición 3:</dt>
<dd><ul class="first last">
<li>Con <code class="docutils literal notranslate"><span class="pre">gdisk</span></code></li>
<li>Size: 70GB / 110 GB</li>
<li>Type: Linux filesystem (<code class="docutils literal notranslate"><span class="pre">8300</span></code>)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Partición 4:</dt>
<dd><ul class="first last">
<li>Con <code class="docutils literal notranslate"><span class="pre">fdisk</span></code></li>
<li>Size: 40GB / 110 GB</li>
<li>Type: HPFS/NTFS/exFAT (<code class="docutils literal notranslate"><span class="pre">7</span></code>)</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>5.1 Primero eliminar todas las particiones del USB con <code class="docutils literal notranslate"><span class="pre">gdisk</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> gdisk /dev/sdc

GPT fdisk <span class="o">(</span>gdisk<span class="o">)</span> version <span class="m">1</span>.0.4

Partition table scan:
MBR: MBR only
BSD: not present
APM: not present
GPT: not present

Found invalid GPT and valid MBR<span class="p">;</span> converting MBR to GPT format
in memory. THIS OPERATION IS POTENTIALLY DESTRUCTIVE! Exit by
typing <span class="s1">&#39;q&#39;</span> <span class="k">if</span> you dont want to convert your MBR partitions
to GPT format!

Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: d
Using <span class="m">1</span>

Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: d
No partitions
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<ul class="simple">
<li>Opciones de <code class="docutils literal notranslate"><span class="pre">gdisk</span></code>:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: ?
b   back up GPT data to a file
c   change a partition s name
d   delete a partition
i   show detailed information on a partition
l   list known partition types
n   add a new partition
o   create a new empty GUID partition table <span class="o">(</span>GPT<span class="o">)</span>
p   print the partition table
q   quit without saving changes
r   recovery and transformation options <span class="o">(</span>experts only<span class="o">)</span>
s   sort partitions
t   change a partition s <span class="nb">type</span> code
v   verify disk
w   write table to disk and <span class="nb">exit</span>
x   extra functionality <span class="o">(</span>experts only<span class="o">)</span>
?   print this menu
</pre></div>
</div>
<ul class="simple">
<li>Lista de tipos de formato en <code class="docutils literal notranslate"><span class="pre">gdisk</span></code>:</li>
</ul>
<div class="last highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: L
Type search string, or &lt;Enter&gt; to show all codes:
<span class="m">0700</span> Microsoft basic data  0c01 Microsoft reserved    <span class="m">2700</span> Windows RE
<span class="m">3000</span> ONIE boot             <span class="m">3001</span> ONIE config           <span class="m">3900</span> Plan <span class="m">9</span>
<span class="m">4100</span> PowerPC PReP boot     <span class="m">4200</span> Windows LDM data      <span class="m">4201</span> Windows LDM metadata
<span class="m">4202</span> Windows Storage Spac  <span class="m">7501</span> IBM GPFS              7f00 ChromeOS kernel
7f01 ChromeOS root         7f02 ChromeOS reserved     <span class="m">8200</span> Linux swap
<span class="m">8300</span> Linux filesystem      <span class="m">8301</span> Linux reserved        <span class="m">8302</span> Linux /home
<span class="m">8303</span> Linux x86 root <span class="o">(</span>/<span class="o">)</span>    <span class="m">8304</span> Linux x86-64 root <span class="o">(</span>/  <span class="m">8305</span> Linux ARM64 root <span class="o">(</span>/<span class="o">)</span>
<span class="m">8306</span> Linux /srv            <span class="m">8307</span> Linux ARM32 root <span class="o">(</span>/<span class="o">)</span>  <span class="m">8308</span> Linux dm-crypt
<span class="m">8309</span> Linux LUKS            <span class="m">8400</span> Intel Rapid Start     8e00 Linux LVM
a000 Android bootloader    a001 Android bootloader <span class="m">2</span>  a002 Android boot <span class="m">1</span>
a003 Android recovery <span class="m">1</span>    a004 Android misc          a005 Android metadata
a006 Android system <span class="m">1</span>      a007 Android cache         a008 Android data
a009 Android persistent    a00a Android factory       a00b Android fastboot/ter
a00c Android OEM           a00d Android vendor        a00e Android config
a00f Android factory <span class="o">(</span>alt  a010 Android meta          a011 Android EXT
a012 Android SBL1          a013 Android SBL2          a014 Android SBL3
a015 Android APPSBL        a016 Android QSEE/tz       a017 Android QHEE/hyp
a018 Android RPM           a019 Android WDOG debug/s  a01a Android DDR
a01b Android CDT           a01c Android RAM dump      a01d Android SEC
a01e Android PMIC          a01f Android misc <span class="m">1</span>        a020 Android misc <span class="m">2</span>
a021 Android device info   a022 Android APDP          a023 Android MSADP
a024 Android DPO           a025 Android recovery <span class="m">2</span>    a026 Android persist
a027 Android modem ST1     a028 Android modem ST2     a029 Android FSC
a02a Android FSG <span class="m">1</span>         a02b Android FSG <span class="m">2</span>         a02c Android SSD
a02d Android keystore      a02e Android encrypt       a02f Android EKSST
a030 Android RCT           a031 Android spare1        a032 Android spare2
a033 Android spare3        a034 Android spare4        a035 Android raw resource
a036 Android boot <span class="m">2</span>        a037 Android FOTA          a038 Android system <span class="m">2</span>
a039 Android cache         a03a Android user data     a03b LG <span class="o">(</span>Android<span class="o">)</span> advance
a03c Android PG1FS         a03d Android PG2FS         a03e Android board info
a03f Android MFG           a040 Android limits        a200 Atari TOS basic data
a500 FreeBSD disklabel     a501 FreeBSD boot          a502 FreeBSD swap
a503 FreeBSD UFS           a504 FreeBSD ZFS           a505 FreeBSD Vinum/RAID
a580 Midnight BSD data     a581 Midnight BSD boot     a582 Midnight BSD swap
a583 Midnight BSD UFS      a584 Midnight BSD ZFS      a585 Midnight BSD Vinum
a600 OpenBSD disklabel     a800 Apple UFS             a901 NetBSD swap
a902 NetBSD FFS            a903 NetBSD LFS            a904 NetBSD concatenated
a905 NetBSD encrypted      a906 NetBSD RAID           ab00 Recovery HD
af00 Apple HFS/HFS+        af01 Apple RAID            af02 Apple RAID offline
af03 Apple label           af04 AppleTV recovery      af05 Apple Core Storage
af06 Apple SoftRAID Statu  af07 Apple SoftRAID Scrat  af08 Apple SoftRAID Volum
af09 Apple SoftRAID Cache  af0a Apple APFS            b300 QNX6 Power-Safe
bc00 Acronis Secure Zone   be00 Solaris boot          bf00 Solaris root
bf01 Solaris /usr <span class="p">&amp;</span> Mac Z  bf02 Solaris swap          bf03 Solaris backup
bf04 Solaris /var          bf05 Solaris /home         bf06 Solaris alternate se
bf07 Solaris Reserved <span class="m">1</span>    bf08 Solaris Reserved <span class="m">2</span>    bf09 Solaris Reserved <span class="m">3</span>
bf0a Solaris Reserved <span class="m">4</span>    bf0b Solaris Reserved <span class="m">5</span>    c001 HP-UX data
c002 HP-UX service         e100 ONIE boot             e101 ONIE config
ea00 Freedesktop <span class="nv">$BOOT</span>     eb00 Haiku BFS             ed00 Sony system partitio
ed01 Lenovo system partit  ef00 EFI System            ef01 MBR partition scheme
ef02 BIOS boot partition   f800 Ceph OSD              f801 Ceph dm-crypt OSD
f802 Ceph journal          f803 Ceph dm-crypt journa  f804 Ceph disk in creatio
f805 Ceph dm-crypt disk i  f806 Ceph block            f807 Ceph block DB
f808 Ceph block write-ahe  f809 Ceph lockbox <span class="k">for</span> dm-  f80a Ceph multipath OSD
f80b Ceph multipath journ  f80c Ceph multipath block  f80d Ceph multipath block
f80e Ceph multipath block  f80f Ceph multipath block  f810 Ceph dm-crypt block
f811 Ceph dm-crypt block   f812 Ceph dm-crypt block   f813 Ceph dm-crypt LUKS j
f814 Ceph dm-crypt LUKS b  f815 Ceph dm-crypt LUKS b  f816 Ceph dm-crypt LUKS b
f817 Ceph dm-crypt LUKS O  fb00 VMWare VMFS           fb01 VMWare reserved
fc00 VMWare kcore crash p  fd00 Linux RAID
</pre></div>
</div>
</div>
<p>5.2 Crear una nueva <code class="docutils literal notranslate"><span class="pre">GUID</span> <span class="pre">partition</span> <span class="pre">table</span> <span class="pre">(GPT)</span></code> con la opción <code class="docutils literal notranslate"><span class="pre">o</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: o
This option deletes all partitions and creates a new protective MBR.
Proceed? <span class="o">(</span>Y/N<span class="o">)</span>: y
</pre></div>
</div>
<p>5.3 Crear las primeras tres particiones con la opción <code class="docutils literal notranslate"><span class="pre">n</span></code> de gdisk:</p>
<p>Referencia: <a class="reference external" href="https://wiki.manjaro.org/index.php?title=Some_basics_of_MBR_v/s_GPT_and_BIOS_v/s_UEFI">MBR vs GPT y BIOS vs UEFI</a></p>
<ul class="simple">
<li>Primero creamos una partición el Master Boot Record (MBR) de 10 MB al inicio de la memoria:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: n
Partition number <span class="o">(</span><span class="m">1</span>-128, default <span class="m">1</span><span class="o">)</span>:
First sector <span class="o">(</span><span class="m">34</span>-234441614, <span class="nv">default</span> <span class="o">=</span> <span class="m">2048</span><span class="o">)</span> or <span class="o">{</span>+-<span class="o">}</span>size<span class="o">{</span>KMGTP<span class="o">}</span>:
Last sector <span class="o">(</span><span class="m">2048</span>-234441614, <span class="nv">default</span> <span class="o">=</span> <span class="m">234441614</span><span class="o">)</span> or <span class="o">{</span>+-<span class="o">}</span>size<span class="o">{</span>KMGTP<span class="o">}</span>:+10MB
Current <span class="nb">type</span> is <span class="s1">&#39;Linux filesystem&#39;</span>
Hex code or GUID <span class="o">(</span>L to show codes, <span class="nv">Enter</span> <span class="o">=</span> <span class="m">8300</span><span class="o">)</span>: EF02
Changed <span class="nb">type</span> of partition to <span class="s1">&#39;BIOS boot partition&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>Luego creamos una partición EFI de 500 MB:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: n
Partition number <span class="o">(</span><span class="m">2</span>-128, default <span class="m">2</span><span class="o">)</span>:
First sector <span class="o">(</span><span class="m">34</span>-234441614, <span class="nv">default</span> <span class="o">=</span> <span class="m">22528</span><span class="o">)</span> or <span class="o">{</span>+-<span class="o">}</span>size<span class="o">{</span>KMGTP<span class="o">}</span>:
Last sector <span class="o">(</span><span class="m">22528</span>-234441614, <span class="nv">default</span> <span class="o">=</span> <span class="m">234441614</span><span class="o">)</span> or <span class="o">{</span>+-<span class="o">}</span>size<span class="o">{</span>KMGTP<span class="o">}</span>: +500MB
Current <span class="nb">type</span> is <span class="s1">&#39;Linux filesystem&#39;</span>
Hex code or GUID <span class="o">(</span>L to show codes, <span class="nv">Enter</span> <span class="o">=</span> <span class="m">8300</span><span class="o">)</span>: EF00
Changed <span class="nb">type</span> of partition to <span class="s1">&#39;EFI System&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li>Finalmente, asignamos espacio para la partición Linux donde instalaremos el SO:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: n
Partition number <span class="o">(</span><span class="m">3</span>-128, default <span class="m">3</span><span class="o">)</span>:
First sector <span class="o">(</span><span class="m">34</span>-234441614, <span class="nv">default</span> <span class="o">=</span> <span class="m">1046528</span><span class="o">)</span> or <span class="o">{</span>+-<span class="o">}</span>size<span class="o">{</span>KMGTP<span class="o">}</span>:
Last sector <span class="o">(</span><span class="m">1046528</span>-234441614, <span class="nv">default</span> <span class="o">=</span> <span class="m">234441614</span><span class="o">)</span> or <span class="o">{</span>+-<span class="o">}</span>size<span class="o">{</span>KMGTP<span class="o">}</span>: +70G
Current <span class="nb">type</span> is <span class="s1">&#39;Linux filesystem&#39;</span>
Hex code or GUID <span class="o">(</span>L to show codes, <span class="nv">Enter</span> <span class="o">=</span> <span class="m">8300</span><span class="o">)</span>:
Changed <span class="nb">type</span> of partition to <span class="s1">&#39;Linux filesystem&#39;</span>
</pre></div>
</div>
<p>5.4 Revisar que la tabla de particiones sea correcta:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: p
Disk /dev/sdc: <span class="m">234441648</span> sectors, <span class="m">111</span>.8 GiB
Model: <span class="m">550</span>
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: <span class="m">512</span>/4096 bytes
Disk identifier <span class="o">(</span>GUID<span class="o">)</span>: 006577F7-F6D7-4A6D-96A3-8CB841B35647
Partition table holds up to <span class="m">128</span> entries
Main partition table begins at sector <span class="m">2</span> and ends at sector <span class="m">33</span>
First usable sector is <span class="m">34</span>, last usable sector is <span class="m">234441614</span>
Partitions will be aligned on <span class="m">2048</span>-sector boundaries
Total free space is <span class="m">86596461</span> sectors <span class="o">(</span><span class="m">41</span>.3 GiB<span class="o">)</span>

Number  Start <span class="o">(</span>sector<span class="o">)</span>    End <span class="o">(</span>sector<span class="o">)</span>  Size       Code  Name
    <span class="m">1</span>            <span class="m">2048</span>           <span class="m">22527</span>   <span class="m">10</span>.0 MiB    EF02  BIOS boot partition
    <span class="m">2</span>           <span class="m">22528</span>         <span class="m">1046527</span>   <span class="m">500</span>.0 MiB   EF00  EFI System
    <span class="m">3</span>         <span class="m">1046528</span>       <span class="m">147847167</span>   <span class="m">70</span>.0 GiB    <span class="m">8300</span>  Linux filesystem
</pre></div>
</div>
<p>5.5 Guardar los cambios realizados en el dispositivo de almacenamiento USB:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>? <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: w

Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
PARTITIONS!!

Do you want to proceed? <span class="o">(</span>Y/N<span class="o">)</span>: y
OK<span class="p">;</span> writing new GUID partition table <span class="o">(</span>GPT<span class="o">)</span> to /dev/sdc.
The operation has completed successfully.
</pre></div>
</div>
<p>5.6 Haremos una última partición con <code class="docutils literal notranslate"><span class="pre">fdisk</span></code> para usarla como almacenamiento común (como si conectáramos un USB a la PC):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> fdisk /dev/sdc

Welcome to fdisk <span class="o">(</span>util-linux <span class="m">2</span>.34<span class="o">)</span>.
Changes will remain in memory only, <span class="k">until</span> you decide to write them.
Be careful before using the write command.

Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: p
Disk /dev/sdc: <span class="m">111</span>.81 GiB, <span class="m">120034123776</span> bytes, <span class="m">234441648</span> sectors
Disk model: <span class="m">550</span>
Units: sectors of <span class="m">1</span> * <span class="nv">512</span> <span class="o">=</span> <span class="m">512</span> bytes
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: <span class="m">512</span> bytes / <span class="m">4096</span> bytes
I/O size <span class="o">(</span>minimum/optimal<span class="o">)</span>: <span class="m">4096</span> bytes / <span class="m">4096</span> bytes
Disklabel type: gpt
Disk identifier: 006577F7-F6D7-4A6D-96A3-8CB841B35647

Device       Start       End   Sectors  Size Type
/dev/sdc1     <span class="m">2048</span>     <span class="m">22527</span>     <span class="m">20480</span>   10M BIOS boot
/dev/sdc2    <span class="m">22528</span>   <span class="m">1046527</span>   <span class="m">1024000</span>  500M EFI System
/dev/sdc3  <span class="m">1046528</span> <span class="m">147847167</span> <span class="m">146800640</span>   70G Linux filesystem
</pre></div>
</div>
<p>Para crear una partición que se use como almacenamiento simple, le daremos el tipo <strong>NTFS</strong>:</p>
<div class="admonition error">
<p class="first admonition-title">Error</p>
<p class="last">El type <code class="docutils literal notranslate"><span class="pre">7</span></code> debería pertenecer a <code class="docutils literal notranslate"><span class="pre">HPFS/NTFS/exFAT</span></code>. Comprobar esto usando el parámetro <code class="docutils literal notranslate"><span class="pre">t</span></code> de <code class="docutils literal notranslate"><span class="pre">fdisk</span></code>.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: n
Partition number <span class="o">(</span><span class="m">4</span>-128, default <span class="m">4</span><span class="o">)</span>:
First sector <span class="o">(</span><span class="m">147847168</span>-234441614, default <span class="m">147847168</span><span class="o">)</span>:
<span class="hll">Last sector, +/-sectors or +/-size<span class="o">{</span>K,M,G,T,P<span class="o">}</span> <span class="o">(</span><span class="m">147847168</span>-234441614, default <span class="m">234441614</span><span class="o">)</span>: +40G
</span>
Created a new partition <span class="m">4</span> of <span class="nb">type</span> <span class="s1">&#39;Linux filesystem&#39;</span> and of size <span class="m">40</span> GiB.

Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: t
Partition number <span class="o">(</span><span class="m">1</span>-4, default <span class="m">4</span><span class="o">)</span>: <span class="m">4</span>
<span class="hll">Partition <span class="nb">type</span> <span class="o">(</span><span class="nb">type</span> L to list all types<span class="o">)</span>: <span class="m">7</span>
</span>
<span class="hll">Changed <span class="nb">type</span> of partition <span class="s1">&#39;Linux filesystem&#39;</span> to <span class="s1">&#39;PowerPC PReP boot&#39;</span>.
</span>
Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: p
Disk /dev/sdc: <span class="m">111</span>.81 GiB, <span class="m">120034123776</span> bytes, <span class="m">234441648</span> sectors
Disk model: <span class="m">550</span>
Units: sectors of <span class="m">1</span> * <span class="nv">512</span> <span class="o">=</span> <span class="m">512</span> bytes
Sector size <span class="o">(</span>logical/physical<span class="o">)</span>: <span class="m">512</span> bytes / <span class="m">4096</span> bytes
I/O size <span class="o">(</span>minimum/optimal<span class="o">)</span>: <span class="m">4096</span> bytes / <span class="m">4096</span> bytes
Disklabel type: gpt
Disk identifier: 006577F7-F6D7-4A6D-96A3-8CB841B35647

Device         Start       End   Sectors  Size Type
/dev/sdc1       <span class="m">2048</span>     <span class="m">22527</span>     <span class="m">20480</span>   10M BIOS boot
/dev/sdc2      <span class="m">22528</span>   <span class="m">1046527</span>   <span class="m">1024000</span>  500M EFI System
/dev/sdc3    <span class="m">1046528</span> <span class="m">147847167</span> <span class="m">146800640</span>   70G Linux filesystem
<span class="hll">/dev/sdc4  <span class="m">147847168</span> <span class="m">231733247</span>  <span class="m">83886080</span>   40G PowerPC PReP boot
</span>
Command <span class="o">(</span>m <span class="k">for</span> <span class="nb">help</span><span class="o">)</span>: w
The partition table has been altered.
Calling ioctl<span class="o">()</span> to re-read partition table.
Syncing disks.
</pre></div>
</div>
<p>5.7 Listar las particiones de la unidad de almacenamiento para confirmar que hemos creado las particiones correctamente:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> lsblk /dev/sdc
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sdc      <span class="m">8</span>:32   <span class="m">0</span> <span class="m">111</span>.8G  <span class="m">0</span> disk
├─sdc1   <span class="m">8</span>:33   <span class="m">0</span>    10M  <span class="m">0</span> part
├─sdc2   <span class="m">8</span>:34   <span class="m">0</span>   500M  <span class="m">0</span> part
├─sdc3   <span class="m">8</span>:35   <span class="m">0</span>    70G  <span class="m">0</span> part
└─sdc4   <span class="m">8</span>:36   <span class="m">0</span>    40G  <span class="m">0</span> part
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Formatear las particiones creadas:</li>
</ol>
<div class="admonition caution">
<p class="first admonition-title">Prudencia</p>
<p class="last">La partición <code class="docutils literal notranslate"><span class="pre">sdc1</span></code> que contiene a la información de BIOS/MBR no será formateada.</p>
</div>
<p>6.1 Formatear la partición EFI <code class="docutils literal notranslate"><span class="pre">sdc2</span></code> con un filesystem <code class="docutils literal notranslate"><span class="pre">FAT32</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> mkfs.fat -F32 /dev/sdc2
mkfs.fat <span class="m">4</span>.1 <span class="o">(</span><span class="m">2017</span>-01-24<span class="o">)</span>
</pre></div>
</div>
<p>6.2 Formatear la partición Linux <code class="docutils literal notranslate"><span class="pre">sdc3</span></code> como filesystem <code class="docutils literal notranslate"><span class="pre">ext4</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> mkfs.ext4 /dev/sdc3
mke2fs <span class="m">1</span>.45.4 <span class="o">(</span><span class="m">23</span>-Sep-2019<span class="o">)</span>
Creating filesystem with <span class="m">18350080</span> 4k blocks and <span class="m">4587520</span> inodes
Filesystem UUID: c99ccd7a-d73d-42f3-ac3e-cd92156a6c96
Superblock backups stored on blocks:
    <span class="m">32768</span>, <span class="m">98304</span>, <span class="m">163840</span>, <span class="m">229376</span>, <span class="m">294912</span>, <span class="m">819200</span>, <span class="m">884736</span>, <span class="m">1605632</span>, <span class="m">2654208</span>,
    <span class="m">4096000</span>, <span class="m">7962624</span>, <span class="m">11239424</span>

Allocating group tables: <span class="k">done</span>
Writing inode tables: <span class="k">done</span>
Creating journal <span class="o">(</span><span class="m">131072</span> blocks<span class="o">)</span>: <span class="k">done</span>
Writing superblocks and filesystem accounting information: <span class="k">done</span>
</pre></div>
</div>
<p>6.3 Formatear la partción <code class="docutils literal notranslate"><span class="pre">sdc4</span></code> como filesystem NTFS:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> mkfs.ntfs -f /dev/sdc4

Cluster size has been automatically <span class="nb">set</span> to <span class="m">4096</span> bytes.
Creating NTFS volume structures.
mkntfs completed successfully. Have a nice day.
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Montar el filesystem de las 3 particiones formateadas:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> mkdir -p /mnt/usb
<span class="s1">&#39;#&#39;</span> mount /dev/sdc3 /mnt/usb

<span class="s1">&#39;#&#39;</span> mkdir /mnt/usb/boot
<span class="s1">&#39;#&#39;</span> mount /dev/sdc2 /mnt/usb/boot

<span class="s1">&#39;#&#39;</span> mkdir /mnt/storage
<span class="s1">&#39;#&#39;</span> mount /dev/sdc4 /mnt/storage
</pre></div>
</div>
</div>
<div class="section" id="instalacion">
<h3><a class="toc-backref" href="#id10">Instalación</a><a class="headerlink" href="#instalacion" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li>Seleccionar los mirrors. En el archivo <code class="docutils literal notranslate"><span class="pre">/etc/pacman.d/mirrorlist</span></code> definimos la lista de servidores mirror de donde se descargarán los paquetes. Eliminar servidores que no deseemos con un editor de texto (<code class="docutils literal notranslate"><span class="pre">vim</span></code> o <code class="docutils literal notranslate"><span class="pre">nano</span></code>):</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">En el archivo <code class="docutils literal notranslate"><span class="pre">/etc/pacman.d/mirrorlist</span></code> donde se listan los mirrors, cuanto más arriba se posicione un mirror en la lista, más prioridad tendrá al descargar un paquete.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> vim /etc/pacman.d/mirrorlist
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> cat /etc/pacman.d/mirrorlist
<span class="c1">##</span>
<span class="c1">## Arch Linux repository mirrorlist</span>
<span class="c1">## Filtered by mirror score from mirror status page</span>
<span class="c1">## Generated on 2020-01-01</span>
<span class="c1">##</span>

<span class="c1">## United States</span>
<span class="nv">Server</span> <span class="o">=</span> http://mirror.dal10.us.leaseweb.net/archlinux/<span class="nv">$repo</span>/os/<span class="nv">$arch</span>
<span class="c1">## United States</span>
<span class="nv">Server</span> <span class="o">=</span> http://archlinux.surlyjake.com/archlinux/<span class="nv">$repo</span>/os/<span class="nv">$arch</span>
<span class="c1">## United States</span>
<span class="nv">Server</span> <span class="o">=</span> http://ca.us.mirror.archlinux-br.org/<span class="nv">$repo</span>/os/<span class="nv">$arch</span>
<span class="c1">## United States</span>
<span class="nv">Server</span> <span class="o">=</span> http://mirror.kaminski.io/archlinux/<span class="nv">$repo</span>/os/<span class="nv">$arch</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Instalar paquetes esenciales del sistema Arch Linux</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> pacstrap /mnt/usb base linux linux-firmware
</pre></div>
</div>
</div>
<div class="section" id="configurar-el-sistema">
<h3><a class="toc-backref" href="#id11">Configurar el sistema</a><a class="headerlink" href="#configurar-el-sistema" title="Enlazar permanentemente con este título">¶</a></h3>
<ol class="arabic simple">
<li>Generar un archivo fstab (filesystem table) para montar correctamente las particiones:</li>
</ol>
<p>El archivo fstab (ver <a class="reference external" href="https://en.wikipedia.org/wiki/Fstab">Wikipedia - fstab</a>) es usado en sistemas Linux para montar correctamente las particiones de disco correctamente al momento del arranque. Estas particioens pueden identificarse en el fstab de diferentes maneras, y algunos métodos aún usan las etiquetas estándar (<code class="docutils literal notranslate"><span class="pre">/dev/...</span></code>), en lugar de UUIDs (ver <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">Wikipedia - Universally unique identifier</a>). Esto será de seguro un punto de falla de una instalación en un USB, pues las etiquetas estándar asignadas para dispositivos removibles no son consistentes luego de cada arranque del sistema.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> genfstab -U /mnt/usb &gt;&gt; sudo /mnt/usb/etc/fstab
</pre></div>
</div>
<p>Nuestro dispositivo USB debe contener ahora un sistema Linux permanente. Pero aún nos falta configurar algunas cosas antes de que inicie por sí mismo.</p>
<ol class="arabic simple" start="2">
<li>Cambiar root (<code class="docutils literal notranslate"><span class="pre">chroot</span></code>) en el nuevo sistema:</li>
</ol>
<p>Más <a class="reference external" href="https://wiki.archlinux.org/index.php/Chroot">información de chroot de Wiki de Arch</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@archiso ~ <span class="s1">&#39;#&#39;</span> arch-chroot /mnt/usb
<span class="o">[</span>root@archiso /<span class="o">]</span><span class="s1">&#39;#&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Configurar el time zone:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> ln -sf /usr/share/zoneinfo/America/Lima /etc/localetime
<span class="s1">&#39;#&#39;</span> hwclock --systohc
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Instalar un editor de texto en el entorno chroot (<a class="reference external" href="https://superuser.com/questions/1499709/nano-command-not-found-after-entering-chroot-during-arch-install">comandos no encontrados en chroot</a>):</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> pacman -S vim
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Localización.</li>
</ol>
<p>5.1 Descomentar la línea <code class="docutils literal notranslate"><span class="pre">es_PE.UTF-8</span> <span class="pre">UTF-8</span></code> del archivo <code class="docutils literal notranslate"><span class="pre">/etc/locale.gen</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> vim /etc/locale.gen

<span class="s1">&#39;#&#39;</span> cat /etc/locale.gen

    ...
    <span class="c1">#en_SG.UTF-8 UTF-8</span>
<span class="hll">    en_US.UTF-8 UTF-8
</span>    <span class="c1">#en_US ISO-8859-1</span>
    ...
    <span class="c1">#es_PA ISO-8859-1</span>
<span class="hll">    es_PE.UTF-8 UTF-8
</span>    <span class="c1">#es_PE ISO-8859-1</span>
    ...
</pre></div>
</div>
<p>5.2 Generar archivos de locación en base al archivo <code class="docutils literal notranslate"><span class="pre">/etc/locale.gen</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> locale-gen

Generating locales...
en_US.UTF-8... <span class="k">done</span>
es_PE.UTF-8... <span class="k">done</span>
Generation complete.
</pre></div>
</div>
<p>5.3 Crear el archivo <code class="docutils literal notranslate"><span class="pre">locale.conf</span></code> con la variable <code class="docutils literal notranslate"><span class="pre">LANG</span></code> (<code class="docutils literal notranslate"><span class="pre">LANG=en_US.UTF-8</span></code> para idioma inglés y <code class="docutils literal notranslate"><span class="pre">LANG=es_PE.UTF-8</span></code> para español):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> <span class="n">echo</span> <span class="n">LANG</span><span class="o">=</span><span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">locale</span><span class="o">.</span><span class="n">conf</span> <span class="c1"># export LANG=en_US.UTF-8</span>

<span class="s1">&#39;#&#39;</span> <span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">locale</span><span class="o">.</span><span class="n">conf</span>

    <span class="n">LANG</span><span class="o">=</span><span class="n">en_US</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>5.4 Para realizar los cambios hechos anteriormente del keyboard layout, editar el archivo <code class="docutils literal notranslate"><span class="pre">/etc/vconsole.conf</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> vim /etc/vconsole.conf

<span class="s1">&#39;#&#39;</span> cat /etc/vconsole.conf

    <span class="nv">KEYMAP</span><span class="o">=</span>la-latin1
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Configuración de red</li>
</ol>
<p>6.1 Crear el archivo <code class="docutils literal notranslate"><span class="pre">/etc/hostname</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> <span class="nb">echo</span> arch &gt; /etc/hostname
<span class="s1">&#39;#&#39;</span> cat /etc/hostname

    arch
</pre></div>
</div>
<p>6.2 Editar el archivo <code class="docutils literal notranslate"><span class="pre">/etc/hosts/</span></code> y agregar 3 líneas:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> vim /etc/hosts
<span class="s1">&#39;#&#39;</span> cat /etc/hosts

    <span class="m">127</span>.0.0.1       localhost
    ::1                 localhost
    <span class="m">127</span>.0.1.1       arch.localdomain        arch
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Configurar una contraseña root:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> passwd

    New password:
    Retype new password:
    passwd: password updated successfully
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li>Bootloader. Para permitir que el dispositivo USB arranque en ambos modos (BIOS y UEFI), necesitamos instalar 2 bootloader. Por facilidad de instalación, instalaremos GRUB para ambos modos:</li>
</ol>
<p>8.1 Descargar los paquetes de <code class="docutils literal notranslate"><span class="pre">grub</span></code> y <code class="docutils literal notranslate"><span class="pre">efibootmgr</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> pacman -S grub efibootmgr
</pre></div>
</div>
<p>8.2 Ver los block devices para determinar el dispositivo USB objetivo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> lsblk
</pre></div>
</div>
<p>El dispositivo USB es <code class="docutils literal notranslate"><span class="pre">/dev/sdX</span></code> sin ningún número.</p>
<p>8.3 Configurar GRUB para el <strong>modo de arranque MBR/BIOS</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> grub-install --target<span class="o">=</span>i386-pc --boot-directory /boot /dev/sdc
</pre></div>
</div>
<p>8.4 Configurar GRUB para el <strong>modo de arranque UEFI</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> grub-install --target<span class="o">=</span>x86_64-efi --efi-directory /boot --boot-directory /boot --removable
Installing <span class="k">for</span> x86_64-efi platform.
Installation finished. No error reported.
</pre></div>
</div>
<p>8.5 Generar una configuración GRUB:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> grub-mkconfig -o /boot/grub/grub.cfg
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-linux
Found initrd image: /boot/initramfs-linux.img
Found fallback initrd image<span class="o">(</span>s<span class="o">)</span> in /boot: initramfs-linux-fallback.img
<span class="k">done</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li>Habilitar el servicio de DHCP <code class="docutils literal notranslate"><span class="pre">dhcpcd</span></code>:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> pacman -S dhcpcd

<span class="s1">&#39;#&#39;</span> systemctl <span class="nb">enable</span> dhcpcd
Created symlink /etc/systemd/system/multi-user.target.wants/dhcpcd.service → /usr/lib/systemd/system/dhcpcd.service.
</pre></div>
</div>
<p>Cuando reiniciemos nuestro SO recién instalado, debería habilitar DHCP automáticamente.</p>
<ol class="arabic simple" start="10">
<li>Crear un nuevo usuario con permisos de sudo:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;#&#39;</span> useradd -md /home/user1 -s /bin/bash user1
<span class="s1">&#39;#&#39;</span> passwd user1
<span class="s1">&#39;#&#39;</span> usermod -aG wheel user1

<span class="s1">&#39;#&#39;</span> pacman -S sudo
<span class="s1">&#39;#&#39;</span> visudo /etc/sudoers

        root <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> ALL

        <span class="c1">## Uncomment to allow members of group wheel to execute any command</span>
        %wheel <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> ALL
</pre></div>
</div>
<ol class="arabic simple" start="11">
<li>Salir de chroot y apagar el sistema:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@archiso /<span class="o">]</span><span class="s1">&#39;#&#39;</span> <span class="nb">exit</span>
root@archiso ~ <span class="s1">&#39;#&#39;</span> umount /mnt/usb/boot /mnt/usb
root@archiso ~ <span class="s1">&#39;#&#39;</span> poweroff
</pre></div>
</div>
<p>Al volver a iniciar el sistema, si tenemos el arranque de dispositivos USB con prioridad, arrancará nuestro USB con el sistema operativo Linux.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="desktop-env.html" class="btn btn-neutral float-right" title="Instalar un Desktop Environment en Arch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installing-arch.html" class="btn btn-neutral float-left" title="Instalando Arch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Gabriel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>